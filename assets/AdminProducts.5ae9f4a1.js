import{a as W}from"./api.b5a5152d.js";import{r as S,h as $e,B as He,o as E,j as N,k as c,C as Ut,n as gt,g as dt,D as We,i as z,w as J,v as tt,A as Ye,E as jt,t as X,m as y,F as lt,q as C,l as _t,z as be,x as D,s as Xe,c as je}from"./vendor.b997f083.js";import{e as Dt}from"./emitter.c6b549dc.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";const Fe=["\u5225\u91DD","\u523A\u7E61","\u5361\u7247","\u9470\u5319\u5708","\u540A\u98FE"];/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */function ie(a,t){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);t&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),i.push.apply(i,e)}return i}function ye(a){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ie(Object(i),!0).forEach(function(e){Qe(a,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):ie(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})}return a}function Nt(a){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nt=function(t){return typeof t}:Nt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(a)}function Ge(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(a,t){for(var i=0;i<t.length;i++){var e=t[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,e.key,e)}}function qe(a,t,i){return t&&ae(a.prototype,t),i&&ae(a,i),a}function Qe(a,t,i){return t in a?Object.defineProperty(a,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[t]=i,a}function we(a){return Ze(a)||Ke(a)||Je(a)||ti()}function Ze(a){if(Array.isArray(a))return Rt(a)}function Ke(a){if(typeof Symbol!="undefined"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Je(a,t){if(!!a){if(typeof a=="string")return Rt(a,t);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Rt(a,t)}}function Rt(a,t){(t==null||t>a.length)&&(t=a.length);for(var i=0,e=new Array(t);i<t;i++)e[i]=a[i];return e}function ti(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var kt=typeof window!="undefined"&&typeof window.document!="undefined",F=kt?window:{},Ft=kt&&F.document.documentElement?"ontouchstart"in F.document.documentElement:!1,Gt=kt?"PointerEvent"in F:!1,I="cropper",qt="all",xe="crop",_e="move",De="zoom",nt="e",st="w",ht="s",K="n",vt="ne",bt="nw",yt="se",wt="sw",zt="".concat(I,"-crop"),oe="".concat(I,"-disabled"),R="".concat(I,"-hidden"),re="".concat(I,"-hide"),ei="".concat(I,"-invisible"),St="".concat(I,"-modal"),Lt="".concat(I,"-move"),It="".concat(I,"Action"),Et="".concat(I,"Preview"),Qt="crop",Ie="move",Ce="none",Bt="crop",$t="cropend",Ht="cropmove",Wt="cropstart",ne="dblclick",ii=Ft?"touchstart":"mousedown",ai=Ft?"touchmove":"mousemove",oi=Ft?"touchend touchcancel":"mouseup",se=Gt?"pointerdown":ii,le=Gt?"pointermove":ai,de=Gt?"pointerup pointercancel":oi,ce="ready",he="resize",ue="wheel",Yt="zoom",pe="image/jpeg",ri=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ni=/^data:/,si=/^data:image\/jpeg;base64,/,li=/^img|canvas$/i,Me=200,Ee=100,me={viewMode:0,dragMode:Qt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Me,minContainerHeight:Ee,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},di='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',ci=Number.isNaN||F.isNaN;function b(a){return typeof a=="number"&&!ci(a)}var fe=function(t){return t>0&&t<1/0};function Pt(a){return typeof a=="undefined"}function ct(a){return Nt(a)==="object"&&a!==null}var hi=Object.prototype.hasOwnProperty;function ut(a){if(!ct(a))return!1;try{var t=a.constructor,i=t.prototype;return t&&i&&hi.call(i,"isPrototypeOf")}catch{return!1}}function V(a){return typeof a=="function"}var ui=Array.prototype.slice;function Te(a){return Array.from?Array.from(a):ui.call(a)}function k(a,t){return a&&V(t)&&(Array.isArray(a)||b(a.length)?Te(a).forEach(function(i,e){t.call(a,i,e,a)}):ct(a)&&Object.keys(a).forEach(function(i){t.call(a,a[i],i,a)})),a}var M=Object.assign||function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];return ct(t)&&e.length>0&&e.forEach(function(o){ct(o)&&Object.keys(o).forEach(function(r){t[r]=o[r]})}),t},pi=/\.\d*(?:0|9){12}\d*$/;function mt(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return pi.test(a)?Math.round(a*t)/t:a}var mi=/^width|height|left|top|marginLeft|marginTop$/;function et(a,t){var i=a.style;k(t,function(e,n){mi.test(n)&&b(e)&&(e="".concat(e,"px")),i[n]=e})}function fi(a,t){return a.classList?a.classList.contains(t):a.className.indexOf(t)>-1}function A(a,t){if(!!t){if(b(a.length)){k(a,function(e){A(e,t)});return}if(a.classList){a.classList.add(t);return}var i=a.className.trim();i?i.indexOf(t)<0&&(a.className="".concat(i," ").concat(t)):a.className=t}}function j(a,t){if(!!t){if(b(a.length)){k(a,function(i){j(i,t)});return}if(a.classList){a.classList.remove(t);return}a.className.indexOf(t)>=0&&(a.className=a.className.replace(t,""))}}function pt(a,t,i){if(!!t){if(b(a.length)){k(a,function(e){pt(e,t,i)});return}i?A(a,t):j(a,t)}}var gi=/([a-z\d])([A-Z])/g;function Zt(a){return a.replace(gi,"$1-$2").toLowerCase()}function Xt(a,t){return ct(a[t])?a[t]:a.dataset?a.dataset[t]:a.getAttribute("data-".concat(Zt(t)))}function Ct(a,t,i){ct(i)?a[t]=i:a.dataset?a.dataset[t]=i:a.setAttribute("data-".concat(Zt(t)),i)}function vi(a,t){if(ct(a[t]))try{delete a[t]}catch{a[t]=void 0}else if(a.dataset)try{delete a.dataset[t]}catch{a.dataset[t]=void 0}else a.removeAttribute("data-".concat(Zt(t)))}var Ne=/\s\s*/,Se=function(){var a=!1;if(kt){var t=!1,i=function(){},e=Object.defineProperty({},"once",{get:function(){return a=!0,t},set:function(o){t=o}});F.addEventListener("test",i,e),F.removeEventListener("test",i,e)}return a}();function H(a,t,i){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=i;t.trim().split(Ne).forEach(function(o){if(!Se){var r=a.listeners;r&&r[o]&&r[o][i]&&(n=r[o][i],delete r[o][i],Object.keys(r[o]).length===0&&delete r[o],Object.keys(r).length===0&&delete a.listeners)}a.removeEventListener(o,n,e)})}function $(a,t,i){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=i;t.trim().split(Ne).forEach(function(o){if(e.once&&!Se){var r=a.listeners,d=r===void 0?{}:r;n=function(){delete d[o][i],a.removeEventListener(o,n,e);for(var h=arguments.length,l=new Array(h),s=0;s<h;s++)l[s]=arguments[s];i.apply(a,l)},d[o]||(d[o]={}),d[o][i]&&a.removeEventListener(o,d[o][i],e),d[o][i]=n,a.listeners=d}a.addEventListener(o,n,e)})}function ft(a,t,i){var e;return V(Event)&&V(CustomEvent)?e=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(e=document.createEvent("CustomEvent"),e.initCustomEvent(t,!0,!0,i)),a.dispatchEvent(e)}function Ue(a){var t=a.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Vt=F.location,bi=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ge(a){var t=a.match(bi);return t!==null&&(t[1]!==Vt.protocol||t[2]!==Vt.hostname||t[3]!==Vt.port)}function ve(a){var t="timestamp=".concat(new Date().getTime());return a+(a.indexOf("?")===-1?"?":"&")+t}function xt(a){var t=a.rotate,i=a.scaleX,e=a.scaleY,n=a.translateX,o=a.translateY,r=[];b(n)&&n!==0&&r.push("translateX(".concat(n,"px)")),b(o)&&o!==0&&r.push("translateY(".concat(o,"px)")),b(t)&&t!==0&&r.push("rotate(".concat(t,"deg)")),b(i)&&i!==1&&r.push("scaleX(".concat(i,")")),b(e)&&e!==1&&r.push("scaleY(".concat(e,")"));var d=r.length?r.join(" "):"none";return{WebkitTransform:d,msTransform:d,transform:d}}function yi(a){var t=ye({},a),i=0;return k(a,function(e,n){delete t[n],k(t,function(o){var r=Math.abs(e.startX-o.startX),d=Math.abs(e.startY-o.startY),u=Math.abs(e.endX-o.endX),h=Math.abs(e.endY-o.endY),l=Math.sqrt(r*r+d*d),s=Math.sqrt(u*u+h*h),p=(s-l)/l;Math.abs(p)>Math.abs(i)&&(i=p)})}),i}function Tt(a,t){var i=a.pageX,e=a.pageY,n={endX:i,endY:e};return t?n:ye({startX:i,startY:e},n)}function wi(a){var t=0,i=0,e=0;return k(a,function(n){var o=n.startX,r=n.startY;t+=o,i+=r,e+=1}),t/=e,i/=e,{pageX:t,pageY:i}}function it(a){var t=a.aspectRatio,i=a.height,e=a.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",o=fe(e),r=fe(i);if(o&&r){var d=i*t;n==="contain"&&d>e||n==="cover"&&d<e?i=e/t:e=i*t}else o?i=e/t:r&&(e=i*t);return{width:e,height:i}}function xi(a){var t=a.width,i=a.height,e=a.degree;if(e=Math.abs(e)%180,e===90)return{width:i,height:t};var n=e%90*Math.PI/180,o=Math.sin(n),r=Math.cos(n),d=t*r+i*o,u=t*o+i*r;return e>90?{width:u,height:d}:{width:d,height:u}}function _i(a,t,i,e){var n=t.aspectRatio,o=t.naturalWidth,r=t.naturalHeight,d=t.rotate,u=d===void 0?0:d,h=t.scaleX,l=h===void 0?1:h,s=t.scaleY,p=s===void 0?1:s,f=i.aspectRatio,g=i.naturalWidth,_=i.naturalHeight,v=e.fillColor,w=v===void 0?"transparent":v,U=e.imageSmoothingEnabled,T=U===void 0?!0:U,q=e.imageSmoothingQuality,L=q===void 0?"low":q,m=e.maxWidth,x=m===void 0?1/0:m,O=e.maxHeight,B=O===void 0?1/0:O,Q=e.minWidth,at=Q===void 0?0:Q,ot=e.minHeight,Z=ot===void 0?0:ot,Y=document.createElement("canvas"),P=Y.getContext("2d"),rt=it({aspectRatio:f,width:x,height:B}),Mt=it({aspectRatio:f,width:at,height:Z},"cover"),Ot=Math.min(rt.width,Math.max(Mt.width,g)),At=Math.min(rt.height,Math.max(Mt.height,_)),Kt=it({aspectRatio:n,width:x,height:B}),Jt=it({aspectRatio:n,width:at,height:Z},"cover"),te=Math.min(Kt.width,Math.max(Jt.width,o)),ee=Math.min(Kt.height,Math.max(Jt.height,r)),Le=[-te/2,-ee/2,te,ee];return Y.width=mt(Ot),Y.height=mt(At),P.fillStyle=w,P.fillRect(0,0,Ot,At),P.save(),P.translate(Ot/2,At/2),P.rotate(u*Math.PI/180),P.scale(l,p),P.imageSmoothingEnabled=T,P.imageSmoothingQuality=L,P.drawImage.apply(P,[a].concat(we(Le.map(function(Be){return Math.floor(mt(Be))})))),P.restore(),Y}var ke=String.fromCharCode;function Di(a,t,i){var e="";i+=t;for(var n=t;n<i;n+=1)e+=ke(a.getUint8(n));return e}var Ii=/^data:.*,/;function Ci(a){var t=a.replace(Ii,""),i=atob(t),e=new ArrayBuffer(i.length),n=new Uint8Array(e);return k(n,function(o,r){n[r]=i.charCodeAt(r)}),e}function Mi(a,t){for(var i=[],e=8192,n=new Uint8Array(a);n.length>0;)i.push(ke.apply(null,Te(n.subarray(0,e)))),n=n.subarray(e);return"data:".concat(t,";base64,").concat(btoa(i.join("")))}function Ei(a){var t=new DataView(a),i;try{var e,n,o;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var r=t.byteLength,d=2;d+1<r;){if(t.getUint8(d)===255&&t.getUint8(d+1)===225){n=d;break}d+=1}if(n){var u=n+4,h=n+10;if(Di(t,u,4)==="Exif"){var l=t.getUint16(h);if(e=l===18761,(e||l===19789)&&t.getUint16(h+2,e)===42){var s=t.getUint32(h+4,e);s>=8&&(o=h+s)}}}if(o){var p=t.getUint16(o,e),f,g;for(g=0;g<p;g+=1)if(f=o+g*12+2,t.getUint16(f,e)===274){f+=8,i=t.getUint16(f,e),t.setUint16(f,1,e);break}}}catch{i=1}return i}function Ti(a){var t=0,i=1,e=1;switch(a){case 2:i=-1;break;case 3:t=-180;break;case 4:e=-1;break;case 5:t=90,e=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:i,scaleY:e}}var Ni={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,e=this.container,n=this.cropper,o=Number(i.minContainerWidth),r=Number(i.minContainerHeight);A(n,R),j(t,R);var d={width:Math.max(e.offsetWidth,o>=0?o:Me),height:Math.max(e.offsetHeight,r>=0?r:Ee)};this.containerData=d,et(n,{width:d.width,height:d.height}),A(t,R),j(n,R)},initCanvas:function(){var t=this.containerData,i=this.imageData,e=this.options.viewMode,n=Math.abs(i.rotate)%180===90,o=n?i.naturalHeight:i.naturalWidth,r=n?i.naturalWidth:i.naturalHeight,d=o/r,u=t.width,h=t.height;t.height*d>t.width?e===3?u=t.height*d:h=t.width/d:e===3?h=t.width/d:u=t.height*d;var l={aspectRatio:d,naturalWidth:o,naturalHeight:r,width:u,height:h};this.canvasData=l,this.limited=e===1||e===2,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(t.width-l.width)/2,l.top=(t.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=M({},l)},limitCanvas:function(t,i){var e=this.options,n=this.containerData,o=this.canvasData,r=this.cropBoxData,d=e.viewMode,u=o.aspectRatio,h=this.cropped&&r;if(t){var l=Number(e.minCanvasWidth)||0,s=Number(e.minCanvasHeight)||0;d>1?(l=Math.max(l,n.width),s=Math.max(s,n.height),d===3&&(s*u>l?l=s*u:s=l/u)):d>0&&(l?l=Math.max(l,h?r.width:0):s?s=Math.max(s,h?r.height:0):h&&(l=r.width,s=r.height,s*u>l?l=s*u:s=l/u));var p=it({aspectRatio:u,width:l,height:s});l=p.width,s=p.height,o.minWidth=l,o.minHeight=s,o.maxWidth=1/0,o.maxHeight=1/0}if(i)if(d>(h?0:1)){var f=n.width-o.width,g=n.height-o.height;o.minLeft=Math.min(0,f),o.minTop=Math.min(0,g),o.maxLeft=Math.max(0,f),o.maxTop=Math.max(0,g),h&&this.limited&&(o.minLeft=Math.min(r.left,r.left+(r.width-o.width)),o.minTop=Math.min(r.top,r.top+(r.height-o.height)),o.maxLeft=r.left,o.maxTop=r.top,d===2&&(o.width>=n.width&&(o.minLeft=Math.min(0,f),o.maxLeft=Math.max(0,f)),o.height>=n.height&&(o.minTop=Math.min(0,g),o.maxTop=Math.max(0,g))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=n.width,o.maxTop=n.height},renderCanvas:function(t,i){var e=this.canvasData,n=this.imageData;if(i){var o=xi({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),r=o.width,d=o.height,u=e.width*(r/e.naturalWidth),h=e.height*(d/e.naturalHeight);e.left-=(u-e.width)/2,e.top-=(h-e.height)/2,e.width=u,e.height=h,e.aspectRatio=r/d,e.naturalWidth=r,e.naturalHeight=d,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,et(this.canvas,M({width:e.width,height:e.height},xt({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,e=this.imageData,n=e.naturalWidth*(i.width/i.naturalWidth),o=e.naturalHeight*(i.height/i.naturalHeight);M(e,{width:n,height:o,left:(i.width-n)/2,top:(i.height-o)/2}),et(this.image,M({width:e.width,height:e.height},xt(M({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,o={width:i.width,height:i.height};e&&(i.height*e>i.width?o.height=o.width/e:o.width=o.height*e),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*n),o.height=Math.max(o.minHeight,o.height*n),o.left=i.left+(i.width-o.width)/2,o.top=i.top+(i.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=M({},o)},limitCropBox:function(t,i){var e=this.options,n=this.containerData,o=this.canvasData,r=this.cropBoxData,d=this.limited,u=e.aspectRatio;if(t){var h=Number(e.minCropBoxWidth)||0,l=Number(e.minCropBoxHeight)||0,s=d?Math.min(n.width,o.width,o.width+o.left,n.width-o.left):n.width,p=d?Math.min(n.height,o.height,o.height+o.top,n.height-o.top):n.height;h=Math.min(h,n.width),l=Math.min(l,n.height),u&&(h&&l?l*u>h?l=h/u:h=l*u:h?l=h/u:l&&(h=l*u),p*u>s?p=s/u:s=p*u),r.minWidth=Math.min(h,s),r.minHeight=Math.min(l,p),r.maxWidth=s,r.maxHeight=p}i&&(d?(r.minLeft=Math.max(0,o.left),r.minTop=Math.max(0,o.top),r.maxLeft=Math.min(n.width,o.left+o.width)-r.width,r.maxTop=Math.min(n.height,o.top+o.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=n.width-r.width,r.maxTop=n.height-r.height))},renderCropBox:function(){var t=this.options,i=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&Ct(this.face,It,e.width>=i.width&&e.height>=i.height?_e:qt),et(this.cropBox,M({width:e.width,height:e.height},xt({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ft(this.element,Bt,this.getData())}},Si={initPreview:function(){var t=this.element,i=this.crossOrigin,e=this.options.preview,n=i?this.crossOriginUrl:this.url,o=t.alt||"The image to preview",r=document.createElement("img");if(i&&(r.crossOrigin=i),r.src=n,r.alt=o,this.viewBox.appendChild(r),this.viewBoxImage=r,!!e){var d=e;typeof e=="string"?d=t.ownerDocument.querySelectorAll(e):e.querySelector&&(d=[e]),this.previews=d,k(d,function(u){var h=document.createElement("img");Ct(u,Et,{width:u.offsetWidth,height:u.offsetHeight,html:u.innerHTML}),i&&(h.crossOrigin=i),h.src=n,h.alt=o,h.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',u.innerHTML="",u.appendChild(h)})}},resetPreview:function(){k(this.previews,function(t){var i=Xt(t,Et);et(t,{width:i.width,height:i.height}),t.innerHTML=i.html,vi(t,Et)})},preview:function(){var t=this.imageData,i=this.canvasData,e=this.cropBoxData,n=e.width,o=e.height,r=t.width,d=t.height,u=e.left-i.left-t.left,h=e.top-i.top-t.top;!this.cropped||this.disabled||(et(this.viewBoxImage,M({width:r,height:d},xt(M({translateX:-u,translateY:-h},t)))),k(this.previews,function(l){var s=Xt(l,Et),p=s.width,f=s.height,g=p,_=f,v=1;n&&(v=p/n,_=o*v),o&&_>f&&(v=f/o,g=n*v,_=f),et(l,{width:g,height:_}),et(l.getElementsByTagName("img")[0],M({width:r*v,height:d*v},xt(M({translateX:-u*v,translateY:-h*v},t))))}))}},Ui={bind:function(){var t=this.element,i=this.options,e=this.cropper;V(i.cropstart)&&$(t,Wt,i.cropstart),V(i.cropmove)&&$(t,Ht,i.cropmove),V(i.cropend)&&$(t,$t,i.cropend),V(i.crop)&&$(t,Bt,i.crop),V(i.zoom)&&$(t,Yt,i.zoom),$(e,se,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&$(e,ue,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&$(e,ne,this.onDblclick=this.dblclick.bind(this)),$(t.ownerDocument,le,this.onCropMove=this.cropMove.bind(this)),$(t.ownerDocument,de,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&$(window,he,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,e=this.cropper;V(i.cropstart)&&H(t,Wt,i.cropstart),V(i.cropmove)&&H(t,Ht,i.cropmove),V(i.cropend)&&H(t,$t,i.cropend),V(i.crop)&&H(t,Bt,i.crop),V(i.zoom)&&H(t,Yt,i.zoom),H(e,se,this.onCropStart),i.zoomable&&i.zoomOnWheel&&H(e,ue,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&H(e,ne,this.onDblclick),H(t.ownerDocument,le,this.onCropMove),H(t.ownerDocument,de,this.onCropEnd),i.responsive&&H(window,he,this.onResize)}},ki={resize:function(){if(!this.disabled){var t=this.options,i=this.container,e=this.containerData,n=i.offsetWidth/e.width,o=i.offsetHeight/e.height,r=Math.abs(n-1)>Math.abs(o-1)?n:o;if(r!==1){var d,u;t.restore&&(d=this.getCanvasData(),u=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(k(d,function(h,l){d[l]=h*r})),this.setCropBoxData(k(u,function(h,l){u[l]=h*r})))}}},dblclick:function(){this.disabled||this.options.dragMode===Ce||this.setDragMode(fi(this.dragBox,zt)?Ie:Qt)},wheel:function(t){var i=this,e=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*e,t)))},cropStart:function(t){var i=t.buttons,e=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(b(i)&&i!==1||b(e)&&e!==0||t.ctrlKey))){var n=this.options,o=this.pointers,r;t.changedTouches?k(t.changedTouches,function(d){o[d.identifier]=Tt(d)}):o[t.pointerId||0]=Tt(t),Object.keys(o).length>1&&n.zoomable&&n.zoomOnTouch?r=De:r=Xt(t.target,It),!!ri.test(r)&&ft(this.element,Wt,{originalEvent:t,action:r})!==!1&&(t.preventDefault(),this.action=r,this.cropping=!1,r===xe&&(this.cropping=!0,A(this.dragBox,St)))}},cropMove:function(t){var i=this.action;if(!(this.disabled||!i)){var e=this.pointers;t.preventDefault(),ft(this.element,Ht,{originalEvent:t,action:i})!==!1&&(t.changedTouches?k(t.changedTouches,function(n){M(e[n.identifier]||{},Tt(n,!0))}):M(e[t.pointerId||0]||{},Tt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,e=this.pointers;t.changedTouches?k(t.changedTouches,function(n){delete e[n.identifier]}):delete e[t.pointerId||0],!!i&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,pt(this.dragBox,St,this.cropped&&this.options.modal)),ft(this.element,$t,{originalEvent:t,action:i}))}}},Oi={change:function(t){var i=this.options,e=this.canvasData,n=this.containerData,o=this.cropBoxData,r=this.pointers,d=this.action,u=i.aspectRatio,h=o.left,l=o.top,s=o.width,p=o.height,f=h+s,g=l+p,_=0,v=0,w=n.width,U=n.height,T=!0,q;!u&&t.shiftKey&&(u=s&&p?s/p:1),this.limited&&(_=o.minLeft,v=o.minTop,w=_+Math.min(n.width,e.width,e.left+e.width),U=v+Math.min(n.height,e.height,e.top+e.height));var L=r[Object.keys(r)[0]],m={x:L.endX-L.startX,y:L.endY-L.startY},x=function(B){switch(B){case nt:f+m.x>w&&(m.x=w-f);break;case st:h+m.x<_&&(m.x=_-h);break;case K:l+m.y<v&&(m.y=v-l);break;case ht:g+m.y>U&&(m.y=U-g);break}};switch(d){case qt:h+=m.x,l+=m.y;break;case nt:if(m.x>=0&&(f>=w||u&&(l<=v||g>=U))){T=!1;break}x(nt),s+=m.x,s<0&&(d=st,s=-s,h-=s),u&&(p=s/u,l+=(o.height-p)/2);break;case K:if(m.y<=0&&(l<=v||u&&(h<=_||f>=w))){T=!1;break}x(K),p-=m.y,l+=m.y,p<0&&(d=ht,p=-p,l-=p),u&&(s=p*u,h+=(o.width-s)/2);break;case st:if(m.x<=0&&(h<=_||u&&(l<=v||g>=U))){T=!1;break}x(st),s-=m.x,h+=m.x,s<0&&(d=nt,s=-s,h-=s),u&&(p=s/u,l+=(o.height-p)/2);break;case ht:if(m.y>=0&&(g>=U||u&&(h<=_||f>=w))){T=!1;break}x(ht),p+=m.y,p<0&&(d=K,p=-p,l-=p),u&&(s=p*u,h+=(o.width-s)/2);break;case vt:if(u){if(m.y<=0&&(l<=v||f>=w)){T=!1;break}x(K),p-=m.y,l+=m.y,s=p*u}else x(K),x(nt),m.x>=0?f<w?s+=m.x:m.y<=0&&l<=v&&(T=!1):s+=m.x,m.y<=0?l>v&&(p-=m.y,l+=m.y):(p-=m.y,l+=m.y);s<0&&p<0?(d=wt,p=-p,s=-s,l-=p,h-=s):s<0?(d=bt,s=-s,h-=s):p<0&&(d=yt,p=-p,l-=p);break;case bt:if(u){if(m.y<=0&&(l<=v||h<=_)){T=!1;break}x(K),p-=m.y,l+=m.y,s=p*u,h+=o.width-s}else x(K),x(st),m.x<=0?h>_?(s-=m.x,h+=m.x):m.y<=0&&l<=v&&(T=!1):(s-=m.x,h+=m.x),m.y<=0?l>v&&(p-=m.y,l+=m.y):(p-=m.y,l+=m.y);s<0&&p<0?(d=yt,p=-p,s=-s,l-=p,h-=s):s<0?(d=vt,s=-s,h-=s):p<0&&(d=wt,p=-p,l-=p);break;case wt:if(u){if(m.x<=0&&(h<=_||g>=U)){T=!1;break}x(st),s-=m.x,h+=m.x,p=s/u}else x(ht),x(st),m.x<=0?h>_?(s-=m.x,h+=m.x):m.y>=0&&g>=U&&(T=!1):(s-=m.x,h+=m.x),m.y>=0?g<U&&(p+=m.y):p+=m.y;s<0&&p<0?(d=vt,p=-p,s=-s,l-=p,h-=s):s<0?(d=yt,s=-s,h-=s):p<0&&(d=bt,p=-p,l-=p);break;case yt:if(u){if(m.x>=0&&(f>=w||g>=U)){T=!1;break}x(nt),s+=m.x,p=s/u}else x(ht),x(nt),m.x>=0?f<w?s+=m.x:m.y>=0&&g>=U&&(T=!1):s+=m.x,m.y>=0?g<U&&(p+=m.y):p+=m.y;s<0&&p<0?(d=bt,p=-p,s=-s,l-=p,h-=s):s<0?(d=wt,s=-s,h-=s):p<0&&(d=vt,p=-p,l-=p);break;case _e:this.move(m.x,m.y),T=!1;break;case De:this.zoom(yi(r),t),T=!1;break;case xe:if(!m.x||!m.y){T=!1;break}q=Ue(this.cropper),h=L.startX-q.left,l=L.startY-q.top,s=o.minWidth,p=o.minHeight,m.x>0?d=m.y>0?yt:vt:m.x<0&&(h-=s,d=m.y>0?wt:bt),m.y<0&&(l-=p),this.cropped||(j(this.cropBox,R),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}T&&(o.width=s,o.height=p,o.left=h,o.top=l,this.action=d,this.renderCropBox()),k(r,function(O){O.startX=O.endX,O.startY=O.endY})}},Ai={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&A(this.dragBox,St),j(this.cropBox,R),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=M({},this.initialImageData),this.canvasData=M({},this.initialCanvasData),this.cropBoxData=M({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(M(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),j(this.dragBox,St),A(this.cropBox,R)),this},replace:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,k(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,j(this.cropper,oe)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,A(this.cropper,oe)),this},destroy:function(){var t=this.element;return t[I]?(t[I]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,n=e.left,o=e.top;return this.moveTo(Pt(t)?t:n+Number(t),Pt(i)?i:o+Number(i))},moveTo:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,n=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(b(t)&&(e.left=t,n=!0),b(i)&&(e.top=i,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,i){var e=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(e.width*t/e.naturalWidth,null,i)},zoomTo:function(t,i,e){var n=this.options,o=this.canvasData,r=o.width,d=o.height,u=o.naturalWidth,h=o.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&n.zoomable){var l=u*t,s=h*t;if(ft(this.element,Yt,{ratio:t,oldRatio:r/u,originalEvent:e})===!1)return this;if(e){var p=this.pointers,f=Ue(this.cropper),g=p&&Object.keys(p).length?wi(p):{pageX:e.pageX,pageY:e.pageY};o.left-=(l-r)*((g.pageX-f.left-o.left)/r),o.top-=(s-d)*((g.pageY-f.top-o.top)/d)}else ut(i)&&b(i.x)&&b(i.y)?(o.left-=(l-r)*((i.x-o.left)/r),o.top-=(s-d)*((i.y-o.top)/d)):(o.left-=(l-r)/2,o.top-=(s-d)/2);o.width=l,o.height=s,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),b(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,b(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(b(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.imageData,n=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(b(t)&&(e.scaleX=t,n=!0),b(i)&&(e.scaleY=i,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.options,e=this.imageData,n=this.canvasData,o=this.cropBoxData,r;if(this.ready&&this.cropped){r={x:o.left-n.left,y:o.top-n.top,width:o.width,height:o.height};var d=e.width/e.naturalWidth;if(k(r,function(l,s){r[s]=l/d}),t){var u=Math.round(r.y+r.height),h=Math.round(r.x+r.width);r.x=Math.round(r.x),r.y=Math.round(r.y),r.width=h-r.x,r.height=u-r.y}}else r={x:0,y:0,width:0,height:0};return i.rotatable&&(r.rotate=e.rotate||0),i.scalable&&(r.scaleX=e.scaleX||1,r.scaleY=e.scaleY||1),r},setData:function(t){var i=this.options,e=this.imageData,n=this.canvasData,o={};if(this.ready&&!this.disabled&&ut(t)){var r=!1;i.rotatable&&b(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,r=!0),i.scalable&&(b(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,r=!0),b(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var d=e.width/e.naturalWidth;b(t.x)&&(o.left=t.x*d+n.left),b(t.y)&&(o.top=t.y*d+n.top),b(t.width)&&(o.width=t.width*d),b(t.height)&&(o.height=t.height*d),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?M({},this.containerData):{}},getImageData:function(){return this.sized?M({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&k(["left","top","width","height","naturalWidth","naturalHeight"],function(e){i[e]=t[e]}),i},setCanvasData:function(t){var i=this.canvasData,e=i.aspectRatio;return this.ready&&!this.disabled&&ut(t)&&(b(t.left)&&(i.left=t.left),b(t.top)&&(i.top=t.top),b(t.width)?(i.width=t.width,i.height=t.width/e):b(t.height)&&(i.height=t.height,i.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,i;return this.ready&&this.cropped&&(i={left:t.left,top:t.top,width:t.width,height:t.height}),i||{}},setCropBoxData:function(t){var i=this.cropBoxData,e=this.options.aspectRatio,n,o;return this.ready&&this.cropped&&!this.disabled&&ut(t)&&(b(t.left)&&(i.left=t.left),b(t.top)&&(i.top=t.top),b(t.width)&&t.width!==i.width&&(n=!0,i.width=t.width),b(t.height)&&t.height!==i.height&&(o=!0,i.height=t.height),e&&(n?i.height=i.width/e:o&&(i.width=i.height*e)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,e=_i(this.image,this.imageData,i,t);if(!this.cropped)return e;var n=this.getData(),o=n.x,r=n.y,d=n.width,u=n.height,h=e.width/Math.floor(i.naturalWidth);h!==1&&(o*=h,r*=h,d*=h,u*=h);var l=d/u,s=it({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=it({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},"cover"),f=it({aspectRatio:l,width:t.width||(h!==1?e.width:d),height:t.height||(h!==1?e.height:u)}),g=f.width,_=f.height;g=Math.min(s.width,Math.max(p.width,g)),_=Math.min(s.height,Math.max(p.height,_));var v=document.createElement("canvas"),w=v.getContext("2d");v.width=mt(g),v.height=mt(_),w.fillStyle=t.fillColor||"transparent",w.fillRect(0,0,g,_);var U=t.imageSmoothingEnabled,T=U===void 0?!0:U,q=t.imageSmoothingQuality;w.imageSmoothingEnabled=T,q&&(w.imageSmoothingQuality=q);var L=e.width,m=e.height,x=o,O=r,B,Q,at,ot,Z,Y;x<=-d||x>L?(x=0,B=0,at=0,Z=0):x<=0?(at=-x,x=0,B=Math.min(L,d+x),Z=B):x<=L&&(at=0,B=Math.min(d,L-x),Z=B),B<=0||O<=-u||O>m?(O=0,Q=0,ot=0,Y=0):O<=0?(ot=-O,O=0,Q=Math.min(m,u+O),Y=Q):O<=m&&(ot=0,Q=Math.min(u,m-O),Y=Q);var P=[x,O,B,Q];if(Z>0&&Y>0){var rt=g/d;P.push(at*rt,ot*rt,Z*rt,Y*rt)}return w.drawImage.apply(w,[e].concat(we(P.map(function(Mt){return Math.floor(mt(Mt))})))),v},setAspectRatio:function(t){var i=this.options;return!this.disabled&&!Pt(t)&&(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,e=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var o=t===Qt,r=i.movable&&t===Ie;t=o||r?t:Ce,i.dragMode=t,Ct(e,It,t),pt(e,zt,o),pt(e,Lt,r),i.cropBoxMovable||(Ct(n,It,t),pt(n,zt,o),pt(n,Lt,r))}return this}},Pi=F.Cropper,Oe=function(){function a(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ge(this,a),!t||!li.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=M({},me,ut(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return qe(a,[{key:"init",value:function(){var i=this.element,e=i.tagName.toLowerCase(),n;if(!i[I]){if(i[I]=this,e==="img"){if(this.isImg=!0,n=i.getAttribute("src")||"",this.originalUrl=n,!n)return;n=i.src}else e==="canvas"&&window.HTMLCanvasElement&&(n=i.toDataURL());this.load(n)}}},{key:"load",value:function(i){var e=this;if(!!i){this.url=i,this.imageData={};var n=this.element,o=this.options;if(!o.rotatable&&!o.scalable&&(o.checkOrientation=!1),!o.checkOrientation||!window.ArrayBuffer){this.clone();return}if(ni.test(i)){si.test(i)?this.read(Ci(i)):this.clone();return}var r=new XMLHttpRequest,d=this.clone.bind(this);this.reloading=!0,this.xhr=r,r.onabort=d,r.onerror=d,r.ontimeout=d,r.onprogress=function(){r.getResponseHeader("content-type")!==pe&&r.abort()},r.onload=function(){e.read(r.response)},r.onloadend=function(){e.reloading=!1,e.xhr=null},o.checkCrossOrigin&&ge(i)&&n.crossOrigin&&(i=ve(i)),r.open("GET",i,!0),r.responseType="arraybuffer",r.withCredentials=n.crossOrigin==="use-credentials",r.send()}}},{key:"read",value:function(i){var e=this.options,n=this.imageData,o=Ei(i),r=0,d=1,u=1;if(o>1){this.url=Mi(i,pe);var h=Ti(o);r=h.rotate,d=h.scaleX,u=h.scaleY}e.rotatable&&(n.rotate=r),e.scalable&&(n.scaleX=d,n.scaleY=u),this.clone()}},{key:"clone",value:function(){var i=this.element,e=this.url,n=i.crossOrigin,o=e;this.options.checkCrossOrigin&&ge(e)&&(n||(n="anonymous"),o=ve(e)),this.crossOrigin=n,this.crossOriginUrl=o;var r=document.createElement("img");n&&(r.crossOrigin=n),r.src=o||e,r.alt=i.alt||"The image to crop",this.image=r,r.onload=this.start.bind(this),r.onerror=this.stop.bind(this),A(r,re),i.parentNode.insertBefore(r,i.nextSibling)}},{key:"start",value:function(){var i=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var n=F.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(F.navigator.userAgent),o=function(h,l){M(i.imageData,{naturalWidth:h,naturalHeight:l,aspectRatio:h/l}),i.initialImageData=M({},i.imageData),i.sizing=!1,i.sized=!0,i.build()};if(e.naturalWidth&&!n){o(e.naturalWidth,e.naturalHeight);return}var r=document.createElement("img"),d=document.body||document.documentElement;this.sizingImage=r,r.onload=function(){o(r.width,r.height),n||d.removeChild(r)},r.src=e.src,n||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",d.appendChild(r))}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var i=this.element,e=this.options,n=this.image,o=i.parentNode,r=document.createElement("div");r.innerHTML=di;var d=r.querySelector(".".concat(I,"-container")),u=d.querySelector(".".concat(I,"-canvas")),h=d.querySelector(".".concat(I,"-drag-box")),l=d.querySelector(".".concat(I,"-crop-box")),s=l.querySelector(".".concat(I,"-face"));this.container=o,this.cropper=d,this.canvas=u,this.dragBox=h,this.cropBox=l,this.viewBox=d.querySelector(".".concat(I,"-view-box")),this.face=s,u.appendChild(n),A(i,R),o.insertBefore(d,i.nextSibling),this.isImg||j(n,re),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,A(l,R),e.guides||A(l.getElementsByClassName("".concat(I,"-dashed")),R),e.center||A(l.getElementsByClassName("".concat(I,"-center")),R),e.background&&A(d,"".concat(I,"-bg")),e.highlight||A(s,ei),e.cropBoxMovable&&(A(s,Lt),Ct(s,It,qt)),e.cropBoxResizable||(A(l.getElementsByClassName("".concat(I,"-line")),R),A(l.getElementsByClassName("".concat(I,"-point")),R)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),V(e.ready)&&$(i,ce,e.ready,{once:!0}),ft(i,ce)}}},{key:"unbuild",value:function(){!this.ready||(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),j(this.element,R))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Pi,a}},{key:"setDefaults",value:function(i){M(me,ut(i)&&i)}}]),a}();M(Oe.prototype,Ni,Si,Ui,ki,Oi,Ai);const Vi={props:["imgName"],emits:["send-img-data"],setup(a,{emit:t}){let i=S(!1),e=S(!1),n=S(""),o={},r={};const d=S(null),u=S({});function h(){i.value=!1,g()}function l(v){i.value=!0,console.log(v),_(v)}function s(v){const w=new FileReader;v&&(e.value=!0,w.readAsDataURL(v),w.onload=()=>{const U=w.result;r=d.value,r.src=U,console.log(r),o=new Oe(r,{aspectRatio:1/1,viewMode:0,dragMode:"move",minContainerWidth:480,minContainerHeight:360,zoomable:!0,scalable:!0,crop:()=>{const T=o.getCroppedCanvas({maxWidth:960,maxHeight:720});u.value=T.toDataURL("image/jpeg")}})})}function p(v){const w=new Image;return w.src=v.toDataURL("image/jpeg"),w}function f(){const v=o.getCroppedCanvas({maxWidth:4096,maxHeight:4096,fillColor:"#fff",imageSmoothingEnabled:!1,imageSmoothingQuality:"high"}),w=p(v);t("send-img-data",w),h()}function g(){e.value&&(n.value="",o.destroy(),e.value=!1)}function _(v){o!=={}&&g(),setTimeout(()=>{s(v)},100)}return $e(()=>{Dt.on(`open-pop-modal-${a.imgName}`,l)}),He(()=>{Dt.off(`open-pop-modal-${a.imgName}`,l)}),{showed:i,cropperImage:d,destination:u,closeModal:h,processImage:f}}},Ri={class:"border-b-2 p-3 flex justify-between items-center"},zi=c("div",{class:"font-bold text-gray-700"},[c("p",null,"\u88C1\u5207\u5716\u7247")],-1),Li=c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Bi=[Li],$i={class:"bg-white h-full grid grid-cols-5 p-4 gap-4"},Hi={class:"col-span-4"},Wi={class:"cropperImageBox rounded overflow-hidden"},Yi={class:"cropperImage",ref:"cropperImage",src:"",alt:"\u539F\u5716"},Xi={class:"col-span-1"},ji={class:"preViewImgBox bg-gray-100 rounded p-5"},Fi={class:"w-100 d-flex flex-column align-items-center mb-4"},Gi=c("p",{class:"mb-1"},"\u9810\u89BD\u5716",-1),qi={class:"bg-white rounded"},Qi=["src"],Zi={class:"flex justify-end p-4 pt-0"};function Ki(a,t,i,e,n,o){return E(),N("div",{class:gt(["fixed top-0 left-0 z-popModal","w-screen h-screen","p-5","flex justify-center items-center","transition-all duration-300",e.showed?"opacity-100":"opacity-0 pointer-events-none"])},[c("div",{class:"absolute top-0 left-0 w-full h-full bg-black/50",onClick:t[0]||(t[0]=r=>e.closeModal())}),c("div",{class:gt(["w-full max-w-4xl bg-white rounded-md overflow-hidden z-popModal",e.showed?"scale-100":"scale-0","transition-all duration-300"])},[c("div",Ri,[zi,c("div",{class:"h-7 w-7 p-1 hover:bg-gray-200 active:scale-90 rounded-md cursor-pointer transition-all",onClick:t[1]||(t[1]=r=>e.closeModal())},Bi)]),c("div",null,[Ut(a.$slots,"itemContent",{},()=>[c("div",$i,[c("div",Hi,[c("div",Wi,[c("img",Yi,null,512)])]),c("div",Xi,[c("div",ji,[c("div",Fi,[Gi,c("div",qi,[c("img",{class:"preViewImgBox__img",src:e.destination,alt:"\u5716\u7247\u9810\u89BD\u5716"},null,8,Qi)])])])])])]),c("div",Zi,[c("button",{type:"button",class:"border border-gray-200 rounded py-2 px-3 hover:border-gray-300",onClick:t[2]||(t[2]=(...r)=>e.processImage&&e.processImage(...r))}," \u78BA\u5B9A ")])])],2)],2)}var Ji=G(Vi,[["render",Ki]]);const ta={props:["imgName","existImgUrl"],emits:["sendImgUrl"],components:{ImgCropperPopModal:Ji},setup(a,{emit:t}){const i=S(null),e=S({useUrl:!1,url:a.existImgUrl||"",finish:!1}),n=dt(()=>a.existImgUrl);We(n,(s,p)=>{console.log("watch search",s,p),e.value.url=s});function o(s){t("sendImgUrl",s,a.imgName)}function r(s){e.value.url=s.src,console.log(e.value.url)}function d(s,p){let f=s.split(","),g=f[0].match(/:(.*?);/)[1],_=atob(f[1]),v=_.length,w=new Uint8Array(v);for(;v--;)w[v]=_.charCodeAt(v);return new File([w],p,{type:g})}function u(){const s=d(e.value.url,"file-to-upload.jpeg");W.adminImageUpload(s).then(p=>{o(p)})}function h(){const[s]=i.value.files;Dt.emit(`open-pop-modal-${a.imgName}`,s)}function l(){e.value.url="",e.value.finish=!1}return{imgsData:e,imgCoverUploader:i,sendImgUrl:o,toogleCropper:h,uploadmgToDB:u,getImg:r,imgsDataDefault:l}}},ea={class:"w-full mb-2"},ia={class:"p-4 border border-gray-300 border-b-0"},aa=["id"],oa={class:"bg-gray-100 h-72 relative"},ra=["src"],na=["for"],sa={class:"flex border border-gray-300"};function la(a,t,i,e,n,o){const r=z("ImgCropperPopModal");return E(),N(lt,null,[c("div",ea,[J(c("input",{type:"text",class:"appearance-none bg-transparent border border-gray-300 w-full text-gray-700 py-2 px-2 leading-tight focus:outline-none",placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u7DB2\u5740","onUpdate:modelValue":t[0]||(t[0]=d=>e.imgsData.url=d),id:"productImgCoverUrl"},null,512),[[tt,e.imgsData.useUrl],[Ye,e.imgsData.url]])]),J(c("div",ia,[J(c("input",{ref:"imgCoverUploader",type:"file",class:"hidden",id:`productImgCover-${i.imgName}`,placeholder:"\u8ACB\u9078\u64C7\u4E0A\u50B3\u6A94\u6848",onChange:t[1]||(t[1]=(...d)=>e.toogleCropper&&e.toogleCropper(...d))},null,40,aa),[[tt,!e.imgsData.useUrl]]),c("div",oa,[e.imgsData.url?(E(),N("img",{key:0,src:e.imgsData.url,alt:"\u5716\u7247",class:"w-full h-full absolute top-0 left-0 object-contain object-center"},null,8,ra)):jt("",!0),c("label",{class:gt(["w-full h-full absolute flex justify-center items-center uppercase tracking-wide text-gray-700 font-medium cursor-pointer",{"bg-gray-700/50 text-white":e.imgsData.url}]),for:`productImgCover-${i.imgName}`},X(e.imgsData.url?"\u91CD\u65B0\u9078\u64C7\u6A94\u6848":"\u9EDE\u64CA\u9078\u64C7\u6A94\u6848"),11,na)])],512),[[tt,!e.imgsData.useUrl]]),c("div",sa,[J(c("button",{class:"py-2 px-3 hover:border-gray-30 flex-1 border-r border-gray-300",type:"button",onClick:t[2]||(t[2]=(...d)=>e.imgsDataDefault&&e.imgsDataDefault(...d))}," \u6E05\u9664 ",512),[[tt,e.imgsData.finish]]),J(c("button",{class:"py-2 px-3 hover:border-gray-30 flex-1 border-r border-gray-300",type:"button",onClick:t[3]||(t[3]=(...d)=>e.uploadmgToDB&&e.uploadmgToDB(...d))}," \u4E0A\u50B3 ",512),[[tt,!e.imgsData.useUrl&&!e.imgsData.finish]]),J(c("button",{class:"py-2 px-3 hover:border-gray-30 flex-1 border-r border-gray-300",type:"button",onClick:t[4]||(t[4]=d=>e.imgsData.finish=!0)}," \u4FDD\u5B58 ",512),[[tt,e.imgsData.useUrl&&!e.imgsData.finish]]),c("button",{class:"py-2 px-3 hover:border-gray-300 flex-1",type:"button",onClick:t[5]||(t[5]=d=>e.imgsData.useUrl=!e.imgsData.useUrl)},X(e.imgsData.useUrl?"\u5207\u63DB\u70BA\u4E0A\u50B3\u5DE5\u5177":"\u5207\u63DB\u70BA\u5716\u7247\u7DB2\u5740"),1)]),y(r,{onSendImgData:e.getImg,"img-name":i.imgName},null,8,["onSendImgData","img-name"])],64)}var Ae=G(ta,[["render",la]]);const da={props:["modelValue","input-id","input-type"],setup(a,{slots:t}){return{data:S(t)}}},ca={class:"w-full mb-6 md:mb-0"},ha=["for"],ua=["type","id","value"];function pa(a,t,i,e,n,o){return E(),N("div",ca,[c("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2",for:a.inputId},[Ut(a.$slots,"default")],8,ha),c("input",{class:"appearance-none bg-transparent border border-gray-300 w-full text-gray-700 py-2 px-2 leading-tight focus:outline-none",type:a.inputType,id:a.inputId,value:i.modelValue,onInput:t[0]||(t[0]=r=>a.$emit("update:modelValue",r.target.value))},null,40,ua)])}var Pe=G(da,[["render",pa]]);const ma={props:{modelValue:Number,"input-id":String},setup(a,{slots:t}){const i=S(t);return console.log(typeof a.modelValue),{data:i}}},fa={class:"w-full mb-6 md:mb-0"},ga=["for"],va=["id","value"];function ba(a,t,i,e,n,o){return E(),N("div",fa,[c("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2",for:a.inputId},[Ut(a.$slots,"default")],8,ga),c("input",{class:"appearance-none bg-transparent border border-gray-300 w-full text-gray-700 py-2 px-2 leading-tight focus:outline-none",type:"number",id:a.inputId,value:i.modelValue,onInput:t[0]||(t[0]=r=>a.$emit("update:modelValue",r.target.value))},null,40,va)])}var Ve=G(ma,[["render",ba]]);const ya={props:["modelValue","input-id","input-type","textAreaRow"],setup(a,{slots:t}){return{data:S(t)}}},wa={class:"w-full mb-6 md:mb-0"},xa=["for"],_a=["id","rows","value"];function Da(a,t,i,e,n,o){return E(),N("div",wa,[c("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2",for:a.inputId},[Ut(a.$slots,"default")],8,xa),c("textarea",{class:"appearance-none bg-transparent border border-gray-300 w-full text-gray-700 py-2 px-2 leading-tight focus:outline-none",id:a.inputId,rows:i.textAreaRow,value:i.modelValue,onInput:t[0]||(t[0]=r=>a.$emit("update:modelValue",r.target.value))},null,40,_a)])}var Re=G(ya,[["render",Da]]);const Ia={components:{ImgUploader:Ae,FormInput:Pe,FormInputNumber:Ve,FormInputTextArea:Re},props:["selectItem","modal-state"],emits:["get-product","clear-item"],setup(a,{emit:t}){const i=dt(()=>{const l={title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:1,imageUrl:"",imagesUrl:[""],material:"",size:{sizeLength:"",sizeWidth:"",sizeHeight:""},reserve:1};return a.selectItem.id?a.selectItem:l}),e=dt(()=>a.modalState),n=S(null),o=S([{useUrl:!0,url:""}]);function r(){console.dir(n);const[l]=n.value.files;W.adminImageUpload(l)}function d(l,s){console.log(l,s),s==="\u4E3B\u8981\u5716\u7247"?i.value.imageUrl=l:i.value.imagesUrl[s]=l,console.log(i.value)}function u(){console.log(i.value),console.log(e.value),e.value==="isNew"?W.adminPostProduct(i.value).then(()=>{t("get-product"),t("clear-item")}):e.value==="edit"&&W.adminUpdateProduct(i.value.id,i.value).then(()=>{t("get-product"),t("clear-item")})}function h(){Dt.emit("open-pop-modal")}return{imgsData:o,productItem:i,state:e,imgCoverUploader:n,openPopModal:h,upload:r,getUrl:d,newProduct:u}}},Ca={class:"flex flex-col relative h-full"},Ma={class:"flex flex-shrink justify-between items-center px-5 py-2 border-b border-gray-300"},Ea=c("h3",null,"\u65B0\u589E\u5546\u54C1",-1),Ta=c("i",{class:"bi bi-x text-xl group-hover:text-gray-900"},null,-1),Na=[Ta],Sa={class:"grid grid-cols-6 gap-4 p-4 flex-shrink"},Ua={class:"col-span-2"},ka=c("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2",for:"productImgCover"}," \u5546\u54C1\u4E3B\u5716 ",-1),Oa={class:"col-span-4 grid grid-cols-2 gap-4"},Aa={class:"col-span-2 lg:col-span-1"},Pa=D("\u5546\u54C1\u6A19\u984C"),Va={class:"col-span-2 lg:col-span-1"},Ra=D("\u5546\u54C1\u5206\u985E"),za={class:"col-span-2 lg:col-span-1"},La=D("\u5546\u54C1\u539F\u50F9"),Ba={class:"col-span-2 lg:col-span-1"},$a=D("\u5546\u54C1\u50F9\u683C"),Ha={class:"col-span-2 lg:col-span-1"},Wa=D("\u5546\u54C1\u5EAB\u5B58"),Ya={class:"col-span-2"},Xa=D("\u5546\u54C1\u63CF\u8FF0"),ja={class:"col-span-2"},Fa=c("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2"}," \u5546\u54C1\u9644\u5716 ",-1),Ga={class:"grid grid-cols-3 gap-4"},qa=["onClick"],Qa=c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Za=[Qa],Ka={key:0},Ja={class:"col-span-2 lg:col-span-1"},to=D("\u5546\u54C1\u55AE\u4F4D"),eo={class:"col-span-2 lg:col-span-1"},io=D("\u5546\u54C1\u6750\u8CEA"),ao={class:"col-span-2 flex gap-x-4"},oo={class:"flex-1"},ro=D("\u5546\u54C1\u9577\u5EA6"),no={class:"flex-1"},so=D("\u5546\u54C1\u5BEC\u5EA6"),lo={class:"flex-1"},co=D("\u5546\u54C1\u9AD8\u5EA6"),ho={class:"col-span-2"},uo=D("\u5546\u54C1\u7279\u8272"),po={class:"flex p-4 w-full border-t border-gray-200 bg-white"},mo={type:"submit",class:"flex-1 bg-purple-200 text-purple-600 rounded py-2 px-3 hover:border-gray-300"};function fo(a,t,i,e,n,o){const r=z("ImgUploader"),d=z("FormInput"),u=z("FormInputNumber"),h=z("FormInputTextArea");return E(),N("div",Ca,[c("div",Ma,[Ea,c("button",{type:"button",class:"mr-2 rounded py-2 px-3",onClick:t[0]||(t[0]=l=>a.$emit("clear-item"))},Na)]),c("form",{onSubmit:t[15]||(t[15]=be((...l)=>e.newProduct&&e.newProduct(...l),["prevent"])),class:"flex flex-col flex-shrink overflow-y-scroll"},[c("div",Sa,[c("div",Ua,[ka,y(r,{onSendImgUrl:e.getUrl,"img-name":"\u4E3B\u8981\u5716\u7247","exist-img-url":e.productItem.imageUrl},null,8,["onSendImgUrl","exist-img-url"])]),c("div",Oa,[c("div",Aa,[y(d,{modelValue:e.productItem.title,"onUpdate:modelValue":t[1]||(t[1]=l=>e.productItem.title=l),"input-id":"productTitle",type:"text"},{default:C(()=>[Pa]),_:1},8,["modelValue"])]),c("div",Va,[y(d,{modelValue:e.productItem.category,"onUpdate:modelValue":t[2]||(t[2]=l=>e.productItem.category=l),"input-id":"productCategory",type:"text"},{default:C(()=>[Ra]),_:1},8,["modelValue"])]),c("div",za,[y(d,{modelValue:e.productItem.origin_price,"onUpdate:modelValue":t[3]||(t[3]=l=>e.productItem.origin_price=l),modelModifiers:{number:!0},"input-id":"productOriginPrice","input-type":"number"},{default:C(()=>[La]),_:1},8,["modelValue"])]),c("div",Ba,[y(u,{modelValue:e.productItem.price,"onUpdate:modelValue":t[4]||(t[4]=l=>e.productItem.price=l),modelModifiers:{number:!0},"input-id":"productPrice"},{default:C(()=>[$a]),_:1},8,["modelValue"])]),c("div",Ha,[y(u,{modelValue:e.productItem.reserve,"onUpdate:modelValue":t[5]||(t[5]=l=>e.productItem.reserve=l),modelModifiers:{number:!0},"input-id":"productReserve"},{default:C(()=>[Wa]),_:1},8,["modelValue"])]),c("div",Ya,[y(h,{modelValue:e.productItem.description,"onUpdate:modelValue":t[6]||(t[6]=l=>e.productItem.description=l),"input-id":"productDescription","text-area-row":"5"},{default:C(()=>[Xa]),_:1},8,["modelValue"])]),c("div",ja,[Fa,c("div",Ga,[(E(!0),N(lt,null,_t(e.productItem.imagesUrl,(l,s)=>(E(),N("div",{class:"relative",key:`img${s}`},[y(r,{onSendImgUrl:e.getUrl,"img-name":`${e.productItem.title}\u5546\u54C1\u9644\u5716-${s}`,"exist-img-url":l},null,8,["onSendImgUrl","img-name","exist-img-url"]),c("button",{type:"button",class:"h-7 w-7 p-1 bg-gray-200 active:scale-90 rounded-md cursor-pointer transition-all absolute top-0 right-0 translate-x-3 -translate-y-3",onClick:p=>e.productItem.imagesUrl.splice(s,1)},Za,8,qa)]))),128)),!e.productItem.imagesUrl.length||e.productItem.imagesUrl[e.productItem.imagesUrl.length-1]!==""?(E(),N("div",Ka,[c("button",{type:"button",class:"w-full min-h-full py-24 border border-gray-300 rounded py-2 px-3 hover:bg-gray-100",onClick:t[7]||(t[7]=l=>e.productItem.imagesUrl.push(""))}," \u65B0\u589E\u5716\u7247\u6B04\u4F4D ")])):jt("",!0)])]),c("div",Ja,[y(d,{modelValue:e.productItem.unit,"onUpdate:modelValue":t[8]||(t[8]=l=>e.productItem.unit=l),"input-id":"productUnit",type:"text"},{default:C(()=>[to]),_:1},8,["modelValue"])]),c("div",eo,[y(d,{modelValue:e.productItem.Material,"onUpdate:modelValue":t[9]||(t[9]=l=>e.productItem.Material=l),"input-id":"productMaterial",type:"text"},{default:C(()=>[io]),_:1},8,["modelValue"])]),c("div",ao,[c("div",oo,[y(d,{modelValue:e.productItem.size.sizeLength,"onUpdate:modelValue":t[10]||(t[10]=l=>e.productItem.size.sizeLength=l),"input-id":"productlength",type:"text"},{default:C(()=>[ro]),_:1},8,["modelValue"])]),c("div",no,[y(d,{modelValue:e.productItem.size.sizeWidth,"onUpdate:modelValue":t[11]||(t[11]=l=>e.productItem.size.sizeWidth=l),"input-id":"productWidth",type:"text"},{default:C(()=>[so]),_:1},8,["modelValue"])]),c("div",lo,[y(d,{modelValue:e.productItem.size.sizeHeight,"onUpdate:modelValue":t[12]||(t[12]=l=>e.productItem.size.sizeHeight=l),"input-id":"productHeight",type:"text"},{default:C(()=>[co]),_:1},8,["modelValue"])])]),c("div",ho,[y(h,{modelValue:e.productItem.content,"onUpdate:modelValue":t[13]||(t[13]=l=>e.productItem.content=l),"input-id":"productContent","text-area-row":"5"},{default:C(()=>[uo]),_:1},8,["modelValue"])])])]),c("div",po,[c("button",{type:"button",class:"mr-2 border border-gray-200 rounded py-2 px-3 hover:border-gray-300",onClick:t[14]||(t[14]=l=>a.$emit("clear-item"))}," \u53D6\u6D88 "),c("button",mo,X(e.state==="isNew"?"\u65B0\u589E\u5546\u54C1":"\u66F4\u65B0\u5546\u54C1"),1)])],32)])}var go=G(Ia,[["render",fo]]);const vo={props:["listState","navArray"],emits:["returnState"],setup(a,{emit:t}){return{propsData:dt(()=>a.listState),emit:t}}},bo={class:"border-b border-gray-200 flex w-full"},yo=["onClick"];function wo(a,t,i,e,n,o){return E(),N("ul",bo,[(E(!0),N(lt,null,_t(i.navArray,(r,d)=>(E(),N("li",{key:r},[c("button",{type:"button",class:gt(["rowNavItem",{active:e.propsData===d+1}]),onClick:u=>a.$emit("returnState",d+1)},X(r),11,yo)]))),128))])}var ze=G(vo,[["render",wo]]);const xo={components:{ImgUploader:Ae,FormInput:Pe,FormInputNumber:Ve,FormInputTextArea:Re,RowNav:ze},props:["selectItem","modal-state"],emits:["get-product","clear-item"],setup(a,{emit:t}){const i=dt(()=>{console.log(a.selectItem);const s={title:"",category:"",origin_price:0,price:0,unit:"",description:"",content:"",is_enabled:1,imageUrl:"",imagesUrl:[""],material:"",size:{sizeLength:"",sizeWidth:"",sizeHeight:""},reserve:1};return a.selectItem.id?a.selectItem:s});console.log(i.value.imagesUrl.length);let e=S(1);const n=dt(()=>a.modalState),o=S(null),r=S([{useUrl:!0,url:""}]);function d(){console.dir(o);const[s]=o.value.files;W.adminImageUpload(s)}function u(s,p){if(console.log(s,p),p==="\u4E3B\u8981\u5716\u7247")i.value.imageUrl=s;else{const f=p.slice(2);i.value.imagesUrl[f]=s}console.log(i.value)}function h(){console.log(i.value),console.log(n.value),n.value==="isNew"?W.adminPostProduct(i.value).then(()=>{t("get-product"),t("clear-item")}):n.value==="edit"&&W.adminUpdateProduct(i.value.id,i.value).then(()=>{t("get-product"),t("clear-item")})}function l(){Dt.emit("open-pop-modal")}return{imgsData:r,listState:e,productItem:i,state:n,imgCoverUploader:o,openPopModal:l,upload:d,getUrl:u,newProduct:h}}},_o={class:"flex flex-col relative h-full"},Do={class:"flex flex-shrink justify-between items-center px-5 py-2 border-b border-gray-300"},Io=c("h3",null,"\u5546\u54C1",-1),Co=c("i",{class:"bi bi-x text-xl group-hover:text-gray-900"},null,-1),Mo=[Co],Eo={class:"p-5 bg-white"},To={class:"text-2xl mb-6"},No={class:"grid grid-cols-6 gap-4 p-4 flex-shrink"},So={class:"col-span-2"},Uo=c("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2",for:"productImgCover"}," \u5546\u54C1\u4E3B\u5716 ",-1),ko={class:"col-span-4 grid grid-cols-2 gap-4"},Oo={class:"col-span-2 lg:col-span-1"},Ao=D("\u5546\u54C1\u6A19\u984C"),Po={class:"col-span-2 lg:col-span-1"},Vo=D("\u5546\u54C1\u5206\u985E"),Ro={class:"col-span-2 lg:col-span-1"},zo=D("\u5546\u54C1\u539F\u50F9"),Lo={class:"col-span-2 lg:col-span-1"},Bo=D("\u5546\u54C1\u50F9\u683C"),$o={class:"col-span-2 lg:col-span-1"},Ho=D("\u5546\u54C1\u5EAB\u5B58"),Wo={class:"col-span-2"},Yo=D("\u5546\u54C1\u63CF\u8FF0"),Xo={class:"col-span-2"},jo=c("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2"}," \u5546\u54C1\u9644\u5716 ",-1),Fo={class:"grid grid-cols-3 gap-4"},Go=["onClick"],qo=c("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Qo=[qo],Zo={key:0},Ko={class:"col-span-2 lg:col-span-1"},Jo=D("\u5546\u54C1\u55AE\u4F4D"),tr={class:"col-span-2 lg:col-span-1"},er=D("\u5546\u54C1\u6750\u8CEA"),ir={class:"col-span-2 flex gap-x-4"},ar={class:"flex-1"},or=D("\u5546\u54C1\u9577\u5EA6"),rr={class:"flex-1"},nr=D("\u5546\u54C1\u5BEC\u5EA6"),sr={class:"flex-1"},lr=D("\u5546\u54C1\u9AD8\u5EA6"),dr={class:"col-span-2"},cr=D("\u5546\u54C1\u7279\u8272"),hr={class:"flex p-4 w-full border-t border-gray-200 bg-white"},ur={type:"submit",class:"flex-1 bg-purple-200 text-purple-600 rounded py-2 px-3 hover:border-gray-300"},pr={class:"flex-shrink overflow-y-scroll"};function mr(a,t,i,e,n,o){const r=z("RowNav"),d=z("ImgUploader"),u=z("FormInput"),h=z("FormInputNumber"),l=z("FormInputTextArea");return E(),N("div",_o,[c("div",Do,[Io,c("button",{type:"button",class:"mr-2 rounded py-2 px-3",onClick:t[0]||(t[0]=s=>a.$emit("clear-item"))},Mo)]),c("div",Eo,[c("h3",To,X(e.productItem.title),1),y(r,{"list-state":e.listState,"nav-array":["\u5546\u54C1\u8CC7\u8A0A","\u512A\u60E0\u6D3B\u52D5","\u552E\u51FA\u7D00\u9304","\u7522\u54C1\u8A55\u50F9"],onReturnState:t[1]||(t[1]=s=>e.listState=s)},null,8,["list-state"])]),J(c("form",{onSubmit:t[16]||(t[16]=be((...s)=>e.newProduct&&e.newProduct(...s),["prevent"])),class:"flex flex-col flex-shrink overflow-y-scroll"},[c("div",No,[c("div",So,[Uo,y(d,{onSendImgUrl:e.getUrl,"img-name":"\u4E3B\u8981\u5716\u7247","exist-img-url":e.productItem.imageUrl},null,8,["onSendImgUrl","exist-img-url"])]),c("div",ko,[c("div",Oo,[y(u,{modelValue:e.productItem.title,"onUpdate:modelValue":t[2]||(t[2]=s=>e.productItem.title=s),"input-id":"productTitle",type:"text"},{default:C(()=>[Ao]),_:1},8,["modelValue"])]),c("div",Po,[y(u,{modelValue:e.productItem.category,"onUpdate:modelValue":t[3]||(t[3]=s=>e.productItem.category=s),"input-id":"productCategory",type:"text"},{default:C(()=>[Vo]),_:1},8,["modelValue"])]),c("div",Ro,[y(u,{modelValue:e.productItem.origin_price,"onUpdate:modelValue":t[4]||(t[4]=s=>e.productItem.origin_price=s),modelModifiers:{number:!0},"input-id":"productOriginPrice","input-type":"number"},{default:C(()=>[zo]),_:1},8,["modelValue"])]),c("div",Lo,[y(h,{modelValue:e.productItem.price,"onUpdate:modelValue":t[5]||(t[5]=s=>e.productItem.price=s),modelModifiers:{number:!0},"input-id":"productPrice"},{default:C(()=>[Bo]),_:1},8,["modelValue"])]),c("div",$o,[y(h,{modelValue:e.productItem.reserve,"onUpdate:modelValue":t[6]||(t[6]=s=>e.productItem.reserve=s),modelModifiers:{number:!0},"input-id":"productReserve"},{default:C(()=>[Ho]),_:1},8,["modelValue"])]),c("div",Wo,[y(l,{modelValue:e.productItem.description,"onUpdate:modelValue":t[7]||(t[7]=s=>e.productItem.description=s),"input-id":"productDescription","text-area-row":"5"},{default:C(()=>[Yo]),_:1},8,["modelValue"])]),c("div",Xo,[jo,c("div",Fo,[(E(!0),N(lt,null,_t(e.productItem.imagesUrl,(s,p)=>(E(),N("div",{class:"relative",key:`img${p}`},[y(d,{onSendImgUrl:e.getUrl,"img-name":`\u5716\u7247${p}`,"exist-img-url":s},null,8,["onSendImgUrl","img-name","exist-img-url"]),c("button",{type:"button",class:"h-7 w-7 p-1 bg-gray-200 active:scale-90 rounded-md cursor-pointer transition-all absolute top-0 right-0 translate-x-3 -translate-y-3",onClick:f=>e.productItem.imagesUrl.splice(p,1)},Qo,8,Go)]))),128)),e.productItem.imagesUrl.length||e.productItem.imagesUrl[e.productItem.imagesUrl.length-1]!==""?(E(),N("div",Zo,[c("button",{type:"button",class:"w-full min-h-full py-24 border border-gray-300 rounded py-2 px-3 hover:bg-gray-100",onClick:t[8]||(t[8]=s=>e.productItem.imagesUrl.push(""))}," \u65B0\u589E\u5716\u7247\u6B04\u4F4D ")])):jt("",!0)])]),c("div",Ko,[y(u,{modelValue:e.productItem.unit,"onUpdate:modelValue":t[9]||(t[9]=s=>e.productItem.unit=s),"input-id":"productUnit",type:"text"},{default:C(()=>[Jo]),_:1},8,["modelValue"])]),c("div",tr,[y(u,{modelValue:e.productItem.Material,"onUpdate:modelValue":t[10]||(t[10]=s=>e.productItem.Material=s),"input-id":"productMaterial",type:"text"},{default:C(()=>[er]),_:1},8,["modelValue"])]),c("div",ir,[c("div",ar,[y(u,{modelValue:e.productItem.size.sizeLength,"onUpdate:modelValue":t[11]||(t[11]=s=>e.productItem.size.sizeLength=s),"input-id":"productlength",type:"text"},{default:C(()=>[or]),_:1},8,["modelValue"])]),c("div",rr,[y(u,{modelValue:e.productItem.size.sizeWidth,"onUpdate:modelValue":t[12]||(t[12]=s=>e.productItem.size.sizeWidth=s),"input-id":"productWidth",type:"text"},{default:C(()=>[nr]),_:1},8,["modelValue"])]),c("div",sr,[y(u,{modelValue:e.productItem.size.sizeHeight,"onUpdate:modelValue":t[13]||(t[13]=s=>e.productItem.size.sizeHeight=s),"input-id":"productHeight",type:"text"},{default:C(()=>[lr]),_:1},8,["modelValue"])])]),c("div",dr,[y(l,{modelValue:e.productItem.content,"onUpdate:modelValue":t[14]||(t[14]=s=>e.productItem.content=s),"input-id":"productContent","text-area-row":"5"},{default:C(()=>[cr]),_:1},8,["modelValue"])])])]),c("div",hr,[c("button",{type:"button",class:"mr-2 border border-gray-200 rounded py-2 px-3 hover:border-gray-300",onClick:t[15]||(t[15]=s=>a.$emit("clear-item"))}," \u53D6\u6D88 "),c("button",ur,X(e.state==="isNew"?"\u65B0\u589E\u5546\u54C1":"\u66F4\u65B0\u5546\u54C1"),1)])],544),[[tt,e.listState===1]]),J(c("div",pr,null,512),[[tt,e.listState===1]])])}var fr=G(xo,[["render",mr]]);const gr={props:["product","listIndex"],emits:["changeProductState","openProductDetail","deleteProduct"],setup(a,{emit:t}){return{emit:t}}},vr={class:"group"},br={class:"relative mb-2"},yr=["src","alt"],wr={class:"hidden group-hover:flex group-hover:bg-gray-900/50 space-x-3 flex-1 justify-center items-center absolute top-0 left-0 w-full h-full rounded"},xr=c("i",{class:"bi bi-pencil-square text-xl"},null,-1),_r=[xr],Dr=c("i",{class:"bi bi-trash2-fill text-xl"},null,-1),Ir=[Dr],Cr={class:"group-hover:text-yellow-600 mb-1"},Mr={class:"flex justify-between"},Er={class:"group-hover:text-yellow-600 text-sm"},Tr={class:"group-hover:text-yellow-600 text-sm"};function Nr(a,t,i,e,n,o){return E(),N("div",vr,[c("div",br,[c("img",{class:"w-100 bg-gray-300 rounded",src:i.product.imageUrl,alt:`${i.product.title}\u7522\u54C1\u5716\u7247`},null,8,yr),c("div",wr,[c("button",{type:"button",class:"border border-gray-200 rounded py-2 px-3 hover:border-gray-300 bg-white","data-action":"remove","data-id":"product.id",onClick:t[0]||(t[0]=r=>a.$emit("openProductDetail","edit",i.product))},_r),c("button",{type:"button",class:"border border-gray-200 rounded py-2 px-3 hover:border-gray-300 bg-white","data-action":"remove","data-id":"product.id",onClick:t[1]||(t[1]=r=>a.$emit("deleteProduct",i.product.id))},Ir)])]),c("p",Cr,X(i.product.title),1),c("div",Mr,[c("p",Er,"NT$ "+X(i.product.price),1),c("p",Tr," \u5C1A\u6709 "+X(i.product.reserve)+" \u4EF6\u5EAB\u5B58 ",1)])])}var Sr=G(gr,[["render",Nr]]);const Ur={components:{AdminProductEdit:go,AdminProductSlider:fr,RowNav:ze,AdminProductListItemSquare:Sr},setup(){const a=S([]);let t=S(1),i=S(!0);const e=dt(()=>{let f=[];return t.value===2?f=a.value.filter(g=>g.is_enabled):t.value===3?f=a.value.filter(g=>!g.is_enabled):f=a.value,f});let n=S({}),o=S(null),r=S(!1);function d(){r.value=!1,o.value=null,n.value={}}function u(f,g){console.log(f,g),f==="isNew"?n.value={}:f==="edit"&&(n.value=JSON.parse(JSON.stringify(g)),console.log(n.value)),r.value=!0,o.value=f}async function h(f){await W.adminDeleteProduct(f),p(),n.value={imagesUrl:[]}}function l(f){f.is_enabled=!f.is_enabled,s(f.id,f)}async function s(f,g){await W.adminUpdateProduct(f,g),p()}function p(){W.adminGetProductsAll().then(f=>{f&&(a.value=Object.values(f),console.log(a.value))})}return W.checkLogin().then(()=>{p()}),{productList:e,listState:t,modalState:o,modalOpen:r,selectItem:n,showed:i,productCategory:Fe,openProductDetail:u,deleteProduct:h,changeProductState:l,clearItem:d,getProduct:p}}},kr={class:"relative px-4 bg-white"},Or={class:"sticky top-0 bg-white z-40 px-5 pt-6 pb-4"},Ar={class:"grid grid-cols-3 mb-8"},Pr=c("div",{class:"col-span-1"},[c("h3",{class:"text-3xl font-medium"},"\u5546\u54C1\u5217\u8868")],-1),Vr={class:"col-span-2 flex justify-end"},Rr={class:"grid grid-cols-5 p-5 gap-4"},zr={class:"col-span-1 min-h-screen"},Lr=Xe('<ul class="mb-6"><li class="text-sm text-gray-400 mb-2">\u5546\u54C1\u72C0\u614B</li><li class="group py-2 px-5 cursor-pointer hover:text-yellow-600"><span class="w-3 h-px bg-gray-300 block absolute top-1/2 left-0 group-hover:bg-yellow-400"></span>\u4E00\u822C\u5546\u54C1 </li><li class="group py-2 px-5 cursor-pointer hover:text-yellow-600"><span class="w-3 h-px bg-gray-300 block absolute top-1/2 left-0 group-hover:bg-yellow-400"></span>\u6D3B\u52D5\u5546\u54C1 </li></ul>',1),Br={class:"mb-6"},$r=c("li",{class:"text-sm text-gray-400 mb-2"},"\u5546\u54C1\u985E\u5225",-1),Hr=c("span",{class:"w-3 h-px bg-gray-300 block absolute top-1/2 left-0 group-hover:bg-yellow-400"},null,-1),Wr={class:"col-start-2 col-span-4"},Yr=c("h5",{class:"mb-4"},"\u5546\u54C1",-1),Xr={class:"grid grid-cols-3 gap-4"},jr={class:"siderBox z-sider"};function Fr(a,t,i,e,n,o){const r=z("RowNav"),d=z("AdminProductListItemSquare"),u=z("AdminProductEdit"),h=z("AdminProductSlider");return E(),N(lt,null,[c("div",kr,[c("div",Or,[c("div",Ar,[Pr,c("div",Vr,[c("button",{type:"button",class:"border border-gray-200 rounded py-2 px-3 hover:border-gray-300",onClick:t[0]||(t[0]=l=>e.openProductDetail("isNew"))}," \u65B0\u589E\u7522\u54C1 ")])]),y(r,{"list-state":e.listState,"nav-array":["\u5168\u90E8\u5546\u54C1","\u520A\u767B\u4E2D","\u5DF2\u4E0B\u67B6"],onReturnState:t[1]||(t[1]=l=>e.listState=l)},null,8,["list-state"])]),c("div",Rr,[c("div",zr,[Lr,c("ul",Br,[$r,(E(!0),N(lt,null,_t(e.productCategory,l=>(E(),N("li",{key:l,class:"group py-2 px-5 cursor-pointer relative hover:text-yellow-600"},[Hr,D(X(l),1)]))),128))])]),c("div",Wr,[Yr,c("div",Xr,[(E(!0),N(lt,null,_t(e.productList,(l,s)=>(E(),je(d,{key:l.id,product:l,"list-index":s,onChangeProductState:e.changeProductState,onOpenProductDetail:e.openProductDetail,onDeleteProduct:e.deleteProduct},null,8,["product","list-index","onChangeProductState","onOpenProductDetail","onDeleteProduct"]))),128))])])])]),c("div",{class:gt(["siderBg z-sider",{active:e.modalOpen}]),onClick:t[2]||(t[2]=l=>e.modalOpen=!1)},null,2),c("div",jr,[y(u,{"select-item":e.selectItem,"modal-state":e.modalState,onGetProduct:e.getProduct,onClearItem:e.clearItem},null,8,["select-item","modal-state","onGetProduct","onClearItem"])]),c("div",{class:gt(["siderBox z-sider",{active:e.modalOpen}])},[y(h,{"select-item":e.selectItem,"modal-state":e.modalState,onGetProduct:e.getProduct,onClearItem:e.clearItem},null,8,["select-item","modal-state","onGetProduct","onClearItem"])],2)],64)}var Kr=G(Ur,[["render",Fr]]);export{Kr as default};
