import{r as f,g as k,h as A,i as v,o as b,j as p,k as t,w as $,v as O,t as u,n as y,F as x,l as S,m as g,q as j,s as L,x as B,R as N}from"./vendor.b997f083.js";import{f as i}from"./api.b5a5152d.js";import{e as V}from"./emitter.c6b549dc.js";import{_ as w}from"./plugin-vue_export-helper.21dcd24c.js";const q={setup(){let h=f(!1),l=f(0);const r=f([]),s=k(()=>{let o=0;return r.value.forEach(n=>{o+=n.qty}),o});function c(o,n){console.log(o,n),i.addCart(o,n).then(()=>{e()})}function m(o,n){i.editCart(o,n).then(C=>{console.log(C.data),e()})}function a(o,n){o>0?(console.log(o),r.value[n].qty+=1):(console.log(o),r.value[n].qty-=1),m(r.value[n].qty,r.value[n].id)}function e(){i.getCart().then(o=>{r.value=JSON.parse(JSON.stringify(o.carts)),console.log(r.value),l.value=o.total})}function d(o){i.deleteCart(o).then(()=>{e()})}function _(){i.deleteCartAll().then(()=>{e()})}return e(),A(()=>{V.on("add-cart",o=>{c(o.id,o.num)})}),{cartAmount:s,cartTotal:l,cartList:r,modalOpen:h,addCart:c,deleteCart:d,editAmout:a,deleteCartAll:_}}},T=t("i",{class:"bi bi-cart text-xl text-white"},null,-1),z={class:"relative h-full flex flex-col"},R={class:"p-8"},F={class:"flex justify-between mb-4"},D=t("i",{class:"bi bi-chevron-double-left mr-1"},null,-1),E=t("p",null,"\u8FD4\u56DE\u7E7C\u7E8C\u8CFC\u7269",-1),J=[D,E],M=t("p",null,"\u522A\u9664\u5168\u90E8",-1),U=[M],G=t("h2",{class:"inline-block py-3 pl-8 pr-32 bg-black text-3xl text-white font-bold mb-8 self-start"}," \u8CFC\u7269\u8ECA ",-1),H={class:"cartList grid grid-cols-1 gap-y-4 flex-grow-1 overflow-y-auto px-8"},K=L('<li class="grid grid-cols-6 gap-2 border-b border-gray-300"><div class="col-span-3"><p class="text-sm text-gray-400 mb-2">\u54C1\u9805</p></div><div class="col-span-2 flex justify-center"><p class="text-sm text-gray-400 mb-2">\u6578\u91CF</p></div><div class="col-span-1 flex justify-center"><p class="text-sm text-gray-400 mb-2">\u522A\u9664</p></div></li>',1),P={class:"col-span-3 flex items-center"},Q=["src","alt"],W={class:"ml-3"},X={class:"col-span-2 flex justify-center items-center"},Y={class:"numberSwitcher"},Z=["onClick"],I=t("i",{class:"bi bi-dash text-xl"},null,-1),tt=[I],et=["value"],ot=["onClick"],st=t("i",{class:"bi bi-plus text-xl"},null,-1),lt=[st],nt={class:"col-span-1 flex justify-center items-center"},rt=["onClick"],at=t("i",{class:"bi bi-x text-xl"},null,-1),it=[at],ct={class:"w-full absolute left-0 bottom-0 border-t border-gray-300 bg-white p-5 flex justify-between items-center"},dt=t("p",{class:"text-sm text-gray-400 mb-1"},"\u7E3D\u91D1\u984D",-1),_t={class:"text-xl font-bold"},ut=B(" \u524D\u5F80\u7D50\u5E33 ");function bt(h,l,r,s,c,m){const a=v("router-link");return b(),p(x,null,[t("button",{type:"button",class:"rounded py-2 px-3 hover:border-gray-300 hover:bg-white/50 relative",onClick:l[0]||(l[0]=e=>s.modalOpen=!s.modalOpen)},[$(t("p",{class:"cart__number"},u(s.cartAmount),513),[[O,s.cartAmount>0]]),T]),t("div",{class:y(["siderBg--x z-sider",{active:s.modalOpen}]),onClick:l[1]||(l[1]=e=>s.modalOpen=!1)},null,2),t("div",{class:y(["siderBox--x z-sider",{active:s.modalOpen}])},[t("div",z,[t("div",R,[t("div",F,[t("button",{type:"button",class:"px-3 py-2 flex items-center",onClick:l[2]||(l[2]=e=>s.modalOpen=!1)},J),t("button",{type:"button",class:"border border-gray-200 rounded py-1 px-2 hover:border-gray-300 bg-white",onClick:l[3]||(l[3]=(...e)=>s.deleteCartAll&&s.deleteCartAll(...e))},U)]),G]),t("ul",H,[K,(b(!0),p(x,null,S(s.cartList,(e,d)=>(b(),p("li",{key:e.id,class:"grid grid-cols-6 gap-2 hover:bg-gray-100/50 py-2"},[t("div",P,[t("img",{class:"w-20",src:e.product.imageUrl,alt:`${e.product}\u5716\u7247`},null,8,Q),t("div",W,[t("p",null,u(e.product.title),1),t("p",null,"NT$ "+u(e.product.price),1)])]),t("div",X,[t("div",Y,[t("button",{type:"button",class:"numberSwitcher__btn",onClick:_=>s.editAmout(-1,d)},tt,8,Z),t("input",{class:"numberSwitcher__numBox focus:outline-none",type:"number",value:e.qty},null,8,et),t("button",{type:"button",class:"numberSwitcher__btn",onClick:_=>s.editAmout(1,d)},lt,8,ot)])]),t("div",nt,[t("button",{type:"button",class:"border border-gray-200 rounded py-1 px-2 hover:border-gray-300 bg-white",onClick:_=>s.deleteCart(e.id)},it,8,rt)])]))),128))]),t("div",ct,[t("div",null,[dt,t("p",_t,"NT$ "+u(s.cartTotal),1)]),g(a,{to:"/checkout",class:"bg-black rounded py-2 px-3 hover:bg-gray-800 text-white"},{default:j(()=>[ut]),_:1})])])],2)],64)}var pt=w(q,[["render",bt]]),ht="/vue-2022-hw/assets/boabolyLogo.8f53b93e.svg";const mt={components:{Cart:pt},setup(){return{RouterView:N}}},ft={class:"flex justify-between items-center border-b border-gray-300 bg-white sticky top-0 z-40"},vt=t("h1",{class:"text-2xl font-bold ml-6"},"Boaboly",-1),xt=t("div",{class:"storeLogo"},[t("img",{src:ht,alt:"Logo"})],-1),gt={class:"bg-black py-4 px-6 flex"},yt={class:"mr-4"},wt=t("li",null,[t("button",{type:"button",class:"rounded py-2 px-3 hover:border-gray-300 hover:bg-white/50"},[t("i",{class:"bi bi-list text-xl text-white"})])],-1),Ct={class:"mx-auto"};function kt(h,l,r,s,c,m){const a=v("Cart"),e=v("RouterView");return b(),p(x,null,[t("header",ft,[vt,xt,t("ul",gt,[t("li",yt,[g(a)]),wt])]),t("div",Ct,[g(e)])],64)}var jt=w(mt,[["render",kt]]);export{jt as default};
