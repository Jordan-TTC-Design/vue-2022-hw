var u=Object.defineProperty;var d=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var i=(o,t,e)=>t in o?u(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,s=(o,t)=>{for(var e in t||(t={}))p.call(t,e)&&i(o,e,t[e]);if(d)for(var e of d(t))g.call(t,e)&&i(o,e,t[e]);return o};import{f as a}from"./vendor.b997f083.js";const n={url:"https://vue3-course-api.hexschool.io/v2",path:"boaboly-shop"},r={getProduct:`${n.url}/api/${n.path}/product`,cart:`${n.url}/api/${n.path}/cart`},l={signin:`${n.url}/admin/signin`,checkLogin:`${n.url}/api/user/check`,adminGetProductsAll:`${n.url}/api/${n.path}/admin/products/all`,adminGetProducts:`${n.url}/api/${n.path}/admin/products`,adminPostProduct:`${n.url}/api/${n.path}/admin/product`,adminDeleteProduct:`${n.url}/api/${n.path}/admin/product`,adminUpdateProduct:`${n.url}/api/${n.path}/admin/product`,imgUpload:`${n.url}/api/${n.path}/admin/upload`},h=document.cookie.replace(/(?:(?:^|.*;\s*)ttcDesignToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");a.defaults.headers.common.Authorization=h;const P={getProducts(){return a.get(`${r.getProduct}s`).then(o=>(console.log("\u6210\u529F\u53D6\u5F97\u591A\u7B46\u5546\u54C1\u8CC7\u6599"),console.log(o),o.data.products)).catch(o=>{console.dir(o.response)})},getProduct(o){return a.get(`${r.getProduct}/${o}`).then(t=>(console.log("\u6210\u529F\u53D6\u5F97\u5546\u54C1\u8CC7\u6599"),console.log(t),t.data.product)).catch(t=>{console.dir(t.response)})},getCart(){return a.get(r.cart).then(o=>(console.log("\u6210\u529F\u53D6\u5F97\u8CFC\u7269\u8ECA\u8CC7\u6599"),console.log(o),o.data.data)).catch(o=>{console.dir(o.response)})},addCart(o,t=1){const e={product_id:o,qty:t};return a.post(r.cart,{data:e}).then(c=>(console.log("\u5DF2\u52A0\u5165\u8CFC\u7269\u8ECA"),console.log(c),c.data)).catch(c=>{console.dir(c.response)})},editCart(o,t){const e={product_id:t,qty:o};return a.put(`${r.cart}/${t}`,{data:e}).then(c=>(console.log("\u4FEE\u6539\u6210\u529F"),console.log(c),c.data)).catch(c=>{console.dir(c.response)})},deleteCart(o){return a.delete(`${r.cart}/${o}`).then(t=>(console.log("\u522A\u9664\u6210\u529F"),console.log(t),t.data)).catch(t=>{console.dir(t.response)})},deleteCartAll(){return a.delete(`${r.cart}s`).then(o=>(console.log("\u4FEE\u6539\u6210\u529F"),console.log(o),o.data)).catch(o=>{console.dir(o.response)})}},k={login(o){a.post(l.signin,o).then(t=>{console.log(t);const{token:e,expired:c}=t.data;document.cookie=`ttcDesignToken=${e}; expires=${new Date(c)};`,console.log("success"),window.location="/admin"}).catch(t=>{console.log(t)})},checkLogin(){return a.post(l.checkLogin).then(o=>(console.log(o),o.data.success)).catch(o=>{console.log(o),this.turnBackLogin(o.response.status)})},adminGetProductsAll(){return a.get(l.adminGetProductsAll).then(o=>(console.log("\u53D6\u5F97\u6210\u529F"),console.log(o),o.data.products)).catch(o=>{console.dir(o.response.status)})},adminPostProduct(o){console.log(o);const t={data:s({},o)};return a.post(l.adminPostProduct,t).then(e=>{console.log("\u65B0\u589E\u6210\u529F"),console.log(e)}).catch(e=>{console.log(e.response)})},adminDeleteProduct(o){return a.delete(`${l.adminDeleteProduct}/${o}`).then(t=>{console.log(t),console.log("\u522A\u9664\u6210\u529F")}).catch(t=>{console.log(t.response)})},adminUpdateProduct(o,t){const e={data:s({},t)};return a.put(`${l.adminUpdateProduct}/${o}`,e).then(c=>{console.log(c),console.log("\u66F4\u65B0\u6210\u529F")}).catch(c=>{console.log(c)})},adminImageUpload(o){const t=new FormData;return t.append("file-to-upload",o),console.log(t),a.post(`${l.imgUpload}`,t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>(console.log(e),e.data.imageUrl)).catch(e=>{console.log(e)})},turnBackLogin(o){o===401&&(window.location="/admin-login")}};export{k as a,P as f};
