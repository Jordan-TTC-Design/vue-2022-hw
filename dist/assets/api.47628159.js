var r=Object.defineProperty;var d=Object.getOwnPropertySymbols;var u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var i=(o,t,n)=>t in o?r(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,l=(o,t)=>{for(var n in t||(t={}))u.call(t,n)&&i(o,n,t[n]);if(d)for(var n of d(t))p.call(t,n)&&i(o,n,t[n]);return o};import{f as a}from"./vendor.39b5dbd6.js";const e={url:"https://vue3-course-api.hexschool.io/v2",path:"boaboly-shop"},c={signin:`${e.url}/admin/signin`,checkLogin:`${e.url}/api/user/check`,adminGetProductsAll:`${e.url}/api/${e.path}/admin/products/all`,adminGetProducts:`${e.url}/api/${e.path}/admin/products`,adminPostProduct:`${e.url}/api/${e.path}/admin/product`,adminDeleteProduct:`${e.url}/api/${e.path}/admin/product`,adminUpdateProduct:`${e.url}/api/${e.path}/admin/product`,imgUpload:`${e.url}/api/${e.path}/admin/upload`},g=document.cookie.replace(/(?:(?:^|.*;\s*)ttcDesignToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");a.defaults.headers.common.Authorization=g;const $={login(o){a.post(c.signin,o).then(t=>{console.log(t);const{token:n,expired:s}=t.data;document.cookie=`ttcDesignToken=${n}; expires=${new Date(s)};`,console.log("success"),window.location="/admin"}).catch(t=>{console.log(t)})},checkLogin(){return a.post(c.checkLogin).then(o=>(console.log(o),o.data.success)).catch(o=>{console.log(o),this.turnBackLogin(o.response.status)})},adminGetProductsAll(){return a.get(c.adminGetProductsAll).then(o=>(console.log("\u53D6\u5F97\u6210\u529F"),console.log(o),o.data.products)).catch(o=>{console.dir(o.response.status)})},adminPostProduct(o){console.log(o);const t={data:l({},o)};return a.post(c.adminPostProduct,t).then(n=>{console.log("\u65B0\u589E\u6210\u529F"),console.log(n)}).catch(n=>{console.log(n.response)})},adminDeleteProduct(o){return a.delete(`${c.adminDeleteProduct}/${o}`).then(t=>{console.log(t),console.log("\u522A\u9664\u6210\u529F")}).catch(t=>{console.log(t.response)})},adminUpdateProduct(o,t){const n={data:l({},t)};return a.put(`${c.adminUpdateProduct}/${o}`,n).then(s=>{console.log(s),console.log("\u66F4\u65B0\u6210\u529F")}).catch(s=>{console.log(s)})},adminImageUpload(o){const t=new FormData;return t.append("file-to-upload",o),a.post(`${c.imgUpload}`,t).then(n=>(console.log(n),n.data.imageUrl)).catch(n=>{console.log(n.response)})},turnBackLogin(o){o===401&&(window.location="#/admin/login")}};export{$ as a};
